<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Actions of a step">

        <meta property="og:site_name" content="Recipe Runner"/>
        <meta property="og:title" content="Actions | Recipe Runner"/>
        <meta property="og:description" content="Actions of a step"/>
        <meta property="og:url" content="https://recipe-runner.yosymfony.com/docs/actions"/>
        <meta property="og:image" content="/assets/img/logo.png"/>
        <meta property="og:type" content="website"/>

        <meta name="twitter:image:alt" content="Recipe Runner">
        <meta name="twitter:card" content="summary_large_image">

        <title>Recipe Runner | Actions</title>

        <link rel="home" href="https://recipe-runner.yosymfony.com">
        <link rel="icon" href="/favicon.ico">

        
                    <!-- Insert analytics code here -->
        
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
        <link rel="stylesheet" href="/assets/build/css/main.css?id=1cdaad4e289d98b1052b">

            </head>

    <body class="flex flex-col justify-between min-h-screen bg-grey-lightest text-grey-darkest leading-normal font-sans">
        <header class="flex items-center bg-white border-b h-24 mb-8 py-4" role="banner">
            <div class="container flex items-center max-w-4xl mx-auto px-4 lg:px-8">
                <div class="flex items-center">
                    <a href="/" title="Recipe Runner home" class="inline-flex items-center">
                        <img class="h-8 md:h-10 mr-3" src="/assets/img/short_logo.svg" alt="Recipe Runner logo" />

                        <h1 class="text-lg md:text-2xl text-blue-darkest font-semibold hover:text-blue-dark my-0 pr-4">Recipe Runner</h1>
                    </a>
                </div>

                <div class="flex flex-1 justify-end items-center text-right md:pl-10">
                                    </div>
            </div>

                <button class="flex justify-center items-center bg-blue border border-blue h-10 mr-4 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

        </header>

        <main role="main" class="w-full flex-auto">
            <section class="container max-w-4xl mx-auto px-6 md:px-8 py-4">
    <div class="flex flex-col lg:flex-row">
        <nav id="js-nav-menu" class="nav-menu hidden lg:block">
            <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/getting-started"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Getting Started
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/recipes"
            class="lvl0 lvl0-active  nav-menu__item hover:text-blue"
        >
            Recipes
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/steps"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Steps
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/actions"
            class="lvl1  active font-semibold text-blue nav-menu__item hover:text-blue"
        >
            Actions
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/conditionals"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Conditionals
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/loops"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Loops
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/variables"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Variables
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/recipe-syntax"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Recipe syntax
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/expressions"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Expressions
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/functions"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Functions
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/modules"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Modules
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/io-module"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            IO module
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/system-module"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            System module
        </a>
    
    </li>
    </ul>
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/developers"
            class="lvl0   nav-menu__item hover:text-blue"
        >
            Developers
        </a>
    
            
        <ul class="list-reset my-0">
            <li class="list-reset pl-4">
            
        <a href="/docs/creating-new-modules"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Creating new modules
        </a>
    
    </li>
            <li class="list-reset pl-4">
            
        <a href="/docs/embedding-recipe-runner-core"
            class="lvl1   nav-menu__item hover:text-blue"
        >
            Embedding Recipe Runner core
        </a>
    
    </li>
    </ul>
    </li>
    </ul>
        </nav>

        <div class="w-full lg:w-3/5 break-words pb-16 lg:pl-4" v-pre>
            <h1>Actions</h1>
<p>Each step contains a list of task. Task are executed in order one at a time.
<strong>The goal of each task is to execute a method of a module</strong>, with very specific arguments.
Variables and functions can be used in arguments to modules.</p>
<pre><code class="language-yaml">steps:
  - name: "OS Info"
    actions:
      - name: "OS family"
        # Method: "write" from recipe-runner/io-module
        write: "Your OS family is {{os_family}}"</code></pre>
<p>You can include variables and functions in argument using <code>{{...}}</code>. For example, if a value from
an environment variable needs to be displayed, the function <code>env</code> can retrieve that value:</p>
<pre><code class="language-yaml">steps:
  - name: "OS Info"
    actions:
      - name: "Shell"
        write: "Shell path: {{env('SHELL')}}" # Value of the variable "SHELL"</code></pre>
<p>Every action should have a name, which is included in the output from running the recipe.
This is human readable output, and so it is useful to provide good descriptions of each action.
If the name is not provided though, a name will be generated automatically following
the pattern <code>Task: {{number}}</code>.</p>
<h2 id="registering_execution">Registering the result of a module execution</h2>
<p>Sometimes, it is useful to execute a task and save the return value in a variable for use
in later tasks. In that case, a new variable could be registered with result. See
<a href="variables/#registering-result-task">Registering variables</a>.</p>
<h2>Module methods</h2>
<p>Module methods consists of a method name and it might has arguments.</p>
<pre><code class="language-yaml">actions:
  - name: Shell
    run:
      command: echo fool
      cwd: "/tmp"</code></pre>
<p>In the previous example, <code>run</code> is the method and <code>command</code> and <code>cwd</code> are arguments.</p>
<h3>Assigning values to arguments</h3>
<p>Arguments allow the types accepted by YAML. Additionally you can use expressions for resolving the value of an arguments:</p>
<pre><code class="language-yaml">actions:
  - name: Shell
    run:
      command: "echo {{1+1}}"     # String interpolation is allowed.
      cwd: "{{env('USER_DIR')}}"  # "pure" expression begins and ends with 
                                  # double curly braces
      timeout: 10</code></pre>
<p>String interpolations are allowed and all the expressions inside them will be resolved before executing the method.
The expression <code>echo {{1+1}}</code> will be a string like this <code>echo 2</code>.</p>
<p><strong>Pure expressions</strong>: as expressions are strings there would be no way to assign a different value from a string to an argument.
Pure expression let you assign the result of a resolved expression to an argument without any casting.
This kind of expression must begin and end with curly braces without any space before and after: <code>{{[1,2,3]}}</code>.</p>
<pre><code class="language-yaml">actions:
  - register_variables:
      list: "{{[1,2,3]}}"
      register: my_vars</code></pre>
<p>The previous example registers a variable called <code>list</code> whose value is an array with three elements.</p>        </div>
    </div>
</section>
        </main>

        <script src="/assets/build/js/main.js?id=79fcc155f4c565f026e5"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>

        <footer class="bg-white text-center text-sm mt-12 py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center list-reset">
                <li class="md:mr-2">
                    &copy; <a href="https://recipe-runner.yosymfony.com" title="Recipe Runner">Recipe Runner</a> 2019
                </li>
                <li>| <a href="https://medium.com/@YoSymfony" title="Blog">Blog</a></li>
            </ul>
        </footer>
    </body>
</html>
